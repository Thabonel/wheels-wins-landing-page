# PERMANENT FIX: Load core stable dependencies
-r requirements-core.txt

# Additional stable dependencies (removing duplicates from requirements-core.txt)
# stripe==12.3.0          # Already in requirements-core.txt
# beautifulsoup4==4.13.4  # Already in requirements-core.txt  
# psutil==7.0.0           # Already in requirements-core.txt (version 6.1.0)
# prometheus-client==0.22.1 # Already in requirements-core.txt
# tiktoken>=0.8.0         # Already in requirements-core.txt
# assemblyai==0.42.0      # Already in requirements-core.txt

# OpenTelemetry for observability (stable versions)
opentelemetry-api>=1.20.0
opentelemetry-sdk>=1.20.0
opentelemetry-instrumentation-fastapi>=0.41b0

# AI Providers (Hybrid PAM System)
google-generativeai>=0.8.0  # Legacy AI provider - Gemini Flash
openai>=1.54.0  # GPT-4o-mini + Realtime API support (gpt-4o-realtime-preview-2024-10-01)
anthropic>=0.45.0  # Claude Sonnet 4 + PDF document support (>=0.41 required for DocumentBlockParam)

# OCR Service Dependencies
pdfplumber>=0.11.0  # PDF text extraction (digital PDFs)
pillow-heif>=0.18.0  # HEIC support server-side (for mobile receipt uploads)
httpx>=0.27.0  # Async HTTP client for Google Cloud Vision API

# AI Agent Observability (stable versions)
langfuse>=2.0.0
# agentops>=0.4.15,<0.5.0  # Temporarily disabled - migration to Claude complete

# Graph Database (Optional - for Graph RAG)
neo4j>=5.14.0,<6.0.0

# OPTIONAL DEPENDENCIES - These will be gracefully handled if missing
# The application code has try/catch blocks for all of these

# Full LangChain (optional - core already included above)
# langchain>=0.3.0

# Vector database (optional - will use fallback mode if missing)
# chromadb>=0.5.0

# Text analysis and TTS (now installed)
textstat==0.7.7
pyttsx3==2.99  # Python TTS library - important fallback for production

# Phase 5A: TTS Dependencies
edge-tts==7.2.3  # Updated to fix Microsoft 403 authentication errors
pydub>=0.25.1
gtts>=2.3.0  # Google Text-to-Speech as additional fallback
elevenlabs>=1.0.0  # ElevenLabs premium TTS for PAM voice

# Phase 5A Optimization: Redis-based caching and rate limiting
aioredis==2.0.1  # Async Redis client (if not using redis[asyncio])
slowapi==0.1.9  # Rate limiting for FastAPI
cachetools==5.3.2  # In-memory caching with TTL

# Phase 2 Security: MFA and Session Management
pyotp>=2.9.0  # TOTP for MFA
qrcode[pil]>=7.4.0  # QR code generation for MFA setup
redis>=5.0.0  # Redis client for session management

# Audio processing for enhanced voice features  
# Note: Using latest stable version compatible with Python 3.8-3.12
# For Python 3.13 support, wait for numba dependency updates
openai-whisper>=20240930

# Advanced TTS (optional - edge-tts provides basic functionality)
# TTS>=0.22.0

# OpenClaw Security Module Dependencies
# Browser automation (for extraction module)
playwright>=1.40.0
playwright-stealth>=1.0.6

# HTML parsing (for extraction module)
lxml>=5.0.0

# Security (for dynamic tools sandbox)
RestrictedPython>=6.0

# Recipe scraping for PAM meal planning (595+ supported sites)
recipe-scrapers>=15.9.0

# Search APIs (optional)
googlemaps==4.10.0
yelpapi==2.5.0

# Timezone detection from coordinates (for fallback)
# timezonefinder==6.5.2  # Temporarily disabled - h3 dependency fails to build on Python 3.13
# Browser timezone detection is used instead (99.9% coverage)

# Additional audio processing (optional)
# transformers==4.36.0

# Testing dependencies (required by CI backend-staging-deploy workflow)
pytest>=7.4.0
pytest-asyncio>=0.21.0
pytest-mock>=3.12.0
pytest-cov>=4.1.0
Faker>=20.0.0

# NOTE: All commented dependencies above are handled gracefully by the application
# They will show warnings in logs but won't break deployment or core functionality
